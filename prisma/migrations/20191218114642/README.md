# Migration `20191218114642`

This migration has been generated by Skyelar Carroll at 12/18/2019, 11:46:43 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
  "address" text   ,
  "address2" text   ,
  "city" text   ,
  "country" text   ,
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "email" text NOT NULL DEFAULT '' ,
  "firstName" text   ,
  "id" text NOT NULL  ,
  "lastName" text   ,
  "password" text NOT NULL DEFAULT '' ,
  "phoneNumber" integer   ,
  "profilePicture" text   ,
  "state" text   ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "username" text NOT NULL DEFAULT '' ,
  "zip" integer   ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Post" (
  "createdAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  "id" text NOT NULL  ,
  "published" boolean NOT NULL DEFAULT false ,
  "updatedAt" timestamp(3) NOT NULL DEFAULT '1970-01-01 00:00:00' ,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."Media" (
  "contentType" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "length" Decimal(65,30)   ,
  "size" integer   ,
  "url" text NOT NULL DEFAULT '' ,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."Post" ADD COLUMN "owner" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT;

ALTER TABLE "public"."Media" ADD COLUMN "post" text NOT NULL  REFERENCES "public"."Post"("id") ON DELETE RESTRICT;

CREATE UNIQUE INDEX "Media_post" ON "public"."Media"("post")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20191218114642
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,46 @@
+datasource db {
+    provider = "postgresql"
+    url      = "postgresql://postgres@localhost/postgres"
+}
+
+generator photon {
+    provider = "photonjs"
+}
+
+model User {
+    id             String   @default(cuid()) @id
+    createdAt      DateTime @default(now())
+    updatedAt      DateTime @updatedAt
+    email          String
+    password       String
+    username       String
+    firstName      String?
+    lastName       String?
+    state          String?
+    city           String?
+    zip            Int?
+    address        String?
+    address2       String?
+    country        String?
+    phoneNumber    Int?
+    profilePicture String?
+    posts          Post[]
+}
+
+model Post {
+    id        String   @default(cuid()) @id
+    createdAt DateTime @default(now())
+    updatedAt DateTime @updatedAt
+    owner     User
+    published Boolean
+    media     Media
+}
+
+model Media {
+    id          String @default(cuid()) @id
+    post        Post
+    url         String
+    contentType String
+    size        Int?
+    length      Float?
+}
```



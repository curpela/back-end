# Migration `20191221215537`

This migration has been generated by Skyelar Carroll at 12/21/2019, 9:55:37 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."PostLike" (
  "id" text NOT NULL  ,
  "likedBy" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
  "post" text   REFERENCES "public"."Post"("id") ON DELETE SET NULL,
  PRIMARY KEY ("id")
);

CREATE TABLE "public"."PostComment" (
  "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
  "comment" text NOT NULL DEFAULT '' ,
  "id" text NOT NULL  ,
  "post" text   REFERENCES "public"."Post"("id") ON DELETE SET NULL,
  PRIMARY KEY ("id")
);

ALTER TABLE "public"."Post" DROP COLUMN "owner",
DROP COLUMN "published",
ADD COLUMN "author" text NOT NULL  REFERENCES "public"."User"("id") ON DELETE RESTRICT,
ADD COLUMN "description" text NOT NULL DEFAULT '' ;
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20191220145642..20191221215537
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource postgresql {
     provider = "postgresql"
-    url = "***"
+    url      = env("DB_URL")
 }
 generator photon {
     provider = "photonjs"
@@ -29,14 +29,16 @@
     following      Follower[] @relation(name: "UserFollowing")
 }
 model Post {
-    id        String   @default(cuid()) @id
-    createdAt DateTime @default(now())
-    updatedAt DateTime @updatedAt
-    owner     User
-    published Boolean
-    media     Media
+    id          String        @default(cuid()) @id
+    createdAt   DateTime      @default(now())
+    updatedAt   DateTime      @updatedAt
+    author      User
+    media       Media
+    description String
+    likes       PostLike[]
+    comments    PostComment[]
 }
 model Media {
     id          String @default(cuid()) @id
@@ -46,8 +48,19 @@
     size        Int?
     length      Float?
 }
+model PostLike {
+    id      String @default(cuid()) @id
+    likedBy User
+}
+
+model PostComment {
+    id      String @default(cuid()) @id
+    comment String
+    author  User
+}
+
 model Follower {
     id        String @default(cuid()) @id
     following User   @relation(name: "UserFollowers")
     follower  User   @relation(name: "UserFollowing")
```



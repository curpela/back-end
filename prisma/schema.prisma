datasource postgresql {
    provider = "postgresql"
    url      = env("DB_URL")
}

generator photon {
    provider = "photonjs"
}

model User {
    id             String     @default(cuid()) @id
    createdAt      DateTime   @default(now())
    updatedAt      DateTime   @updatedAt
    email          String     @unique
    username       String     @unique
    password       String
    firstName      String
    lastName       String
    state          String?
    city           String?
    zip            Int?
    address        String?
    address2       String?
    country        String?
    phoneNumber    Int?
    profilePicture String?
    posts          Post[]
    followers      Follower[] @relation(name: "UserFollowers")
    following      Follower[] @relation(name: "UserFollowing")
}

model Post {
    id          String        @default(cuid()) @id
    createdAt   DateTime      @default(now())
    updatedAt   DateTime      @updatedAt
    author      User
    media       Media
    description String
    likes       PostLike[]
    comments    PostComment[]
}

model Media {
    id          String @default(cuid()) @id
    post        Post
    url         String
    contentType String
    size        Int?
    length      Float?
}

model PostLike {
    id      String @default(cuid()) @id
    likedBy User
}

model PostComment {
    id      String @default(cuid()) @id
    comment String
    author  User
}

model Follower {
    id        String @default(cuid()) @id
    following User   @relation(name: "UserFollowers")
    follower  User   @relation(name: "UserFollowing")
}
